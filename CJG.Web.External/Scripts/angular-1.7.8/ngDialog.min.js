/*! ng-dialog - v1.2.0 (https://github.com/likeastore/ngDialog) */
!function(e,o){"undefined"!=typeof module&&module.exports?("undefined"==typeof angular?o(require("angular")):o(angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],o):o(e.angular)}(this,function(e){"use strict";var o=e.module("ngDialog",[]),a=e.element,n=e.isDefined,t=(document.body||document.documentElement).style,l=n(t.animation)||n(t.WebkitAnimation)||n(t.MozAnimation)||n(t.MsAnimation)||n(t.OAnimation),i="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",r={html:!1,body:!1},s={},g=[],c=[],d=!1,u=!1,p=[];return o.provider("ngDialog",function(){var o=this.defaults={className:"ngdialog-theme-default",appendClassName:"",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,onOpenCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null,bodyClassName:"ngdialog-open",width:null,height:null};this.setForceHtmlReload=function(e){r.html=e||!1},this.setForceBodyReload=function(e){r.body=e||!1},this.setDefaults=function(a){e.extend(o,a)},this.setOpenOnePerName=function(e){u=e||!1};var n,t=0,m=0,f={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(y,D,v,b,h,C,$,w,A,S){var E=[],B={onDocumentKeydown:function(e){27===e.keyCode&&x.close("$escape")},activate:function(e){e.data("$ngDialogOptions").trapFocus&&(e.on("keydown",B.onTrapFocusKeydown),E.body.on("keydown",B.onTrapFocusKeydown))},deactivate:function(e){e.off("keydown",B.onTrapFocusKeydown),E.body.off("keydown",B.onTrapFocusKeydown)},deactivateAll:function(o){e.forEach(o,function(o){var a=e.element(o);B.deactivate(a)})},setBodyPadding:function(e){var o=parseInt(E.body.css("padding-right")||0,10);E.body.css("padding-right",o+e+"px"),E.body.data("ng-dialog-original-padding",o),C.$broadcast("ngDialog.setPadding",e)},resetBodyPadding:function(){var e=E.body.data("ng-dialog-original-padding");e?E.body.css("padding-right",e+"px"):E.body.css("padding-right",""),C.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(e,o){var a=e.data("$ngDialogOptions"),t=e.attr("id"),r=s[t];if(B.deactivate(e),r){if(E.body.css("position",""),E.body.css("top",""),window.scrollTo(0,r.scrollY||0),void 0!==w.Hammer){var c=r.hammerTime;c.off("tap",n),c.destroy&&c.destroy(),delete r.hammerTime}else e.unbind("click");1===m&&E.body.unbind("keydown",B.onDocumentKeydown),e.hasClass("ngdialog-closing")||(m-=1);var u=e.data("$ngDialogPreviousFocus");u&&u.focus&&u.focus(),C.$broadcast("ngDialog.closing",e,o),m=m<0?0:m,l&&!a.disableAnimation?(r.$destroy(),e.unbind(i).bind(i,function(){B.closeDialogElement(e,o)}).addClass("ngdialog-closing")):(r.$destroy(),B.closeDialogElement(e,o)),f[t]&&(f[t].resolve({id:t,value:o,$dialog:e,remainingDialogs:m}),delete f[t]),s[t]&&delete s[t],g.splice(g.indexOf(t),1),g.length||(E.body.unbind("keydown",B.onDocumentKeydown),d=!1),0==m&&(n=void 0)}},closeDialogElement:function(e,o){var a=e.data("$ngDialogOptions");e.remove(),c.splice(c.indexOf(a.bodyClassName),1),-1===c.indexOf(a.bodyClassName)&&(E.html.removeClass(a.bodyClassName),E.body.removeClass(a.bodyClassName)),0===m&&B.resetBodyPadding(),C.$broadcast("ngDialog.closed",e,o)},closeDialog:function(o,a){var n=o.data("$ngDialogPreCloseCallback");if(n&&e.isFunction(n)){var t=n.call(o,a);if(e.isObject(t))t.closePromise?t.closePromise.then(function(){B.performCloseDialog(o,a)},function(){return!1}):t.then(function(){B.performCloseDialog(o,a)},function(){return!1});else{if(!1===t)return!1;B.performCloseDialog(o,a)}}else B.performCloseDialog(o,a)},onTrapFocusKeydown:function(o){var a,n=e.element(o.currentTarget);if(n.hasClass("ngdialog"))a=n;else if(null===(a=B.getActiveDialog()))return;var t=9===o.keyCode,l=!0===o.shiftKey;t&&B.handleTab(a,o,l)},handleTab:function(e,o,a){var n=B.getFocusableElements(e);if(0!==n.length){var t=document.activeElement,l=Array.prototype.indexOf.call(n,t),i=-1===l,r=0===l,s=l===n.length-1,g=!1;a?(i||r)&&(n[n.length-1].focus(),g=!0):(i||s)&&(n[0].focus(),g=!0),g&&(o.preventDefault(),o.stopPropagation())}else document.activeElement&&document.activeElement.blur&&document.activeElement.blur()},autoFocus:function(e){var o=e[0],n=o.querySelector("*[autofocus]");if(null===n||(n.focus(),document.activeElement!==n)){var t=B.getFocusableElements(e);if(t.length>0)t[0].focus();else{var l=B.filterVisibleElements(o.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(l.length>0){var i=l[0];a(i).attr("tabindex","-1").css("outline","0"),i.focus()}}}},getFocusableElements:function(e){var o=e[0].querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"),a=B.filterTabbableElements(o);return B.filterVisibleElements(a)},filterTabbableElements:function(e){for(var o=[],n=0;n<e.length;n++){var t=e[n];"-1"!==a(t).attr("tabindex")&&o.push(t)}return o},filterVisibleElements:function(e){for(var o=[],a=0;a<e.length;a++){var n=e[a];(n.offsetWidth>0||n.offsetHeight>0)&&o.push(n)}return o},getActiveDialog:function(){var e=document.querySelectorAll(".ngdialog");return 0===e.length?null:a(e[e.length-1])},applyAriaAttributes:function(e,o){if(o.ariaAuto){if(!o.ariaRole){var a=B.getFocusableElements(e).length>0?"dialog":"alertdialog";o.ariaRole=a}o.ariaLabelledBySelector||(o.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),o.ariaDescribedBySelector||(o.ariaDescribedBySelector="article,section,p")}o.ariaRole&&e.attr("role",o.ariaRole),B.applyAriaAttribute(e,"aria-labelledby",o.ariaLabelledById,o.ariaLabelledBySelector),B.applyAriaAttribute(e,"aria-describedby",o.ariaDescribedById,o.ariaDescribedBySelector)},applyAriaAttribute:function(e,o,n,t){if(n)e.attr(o,n);else if(t){var l=e.attr("id"),i=e[0].querySelector(t);if(!i)return;var r=l+"-"+o;return a(i).attr("id",r),e.attr(o,r),r}},detectUIRouter:function(){return S.has("$transitions")?"1.0.0+":!!S.has("$state")&&"legacy"},getRouterLocationEventName:function(){return B.detectUIRouter()?"$stateChangeStart":"$locationChangeStart"}},x={__PRIVATE__:B,open:function(l){var i=null;if(l=l||{},!(u&&l.name&&(i=l.name.toLowerCase().replace(/\s/g,"-")+"-dialog",this.isOpen(i)))){var r,y,O,k,P,F=e.copy(o),T=++t;i=i||"ngdialog"+T,g.push(i),void 0!==F.data&&(void 0===l.data&&(l.data={}),l.data=e.merge(e.copy(F.data),l.data)),e.extend(F,l),f[i]=r=b.defer(),s[i]=y=e.isObject(F.scope)?F.scope.$new():C.$new();var N=e.extend({},F.resolve);return e.forEach(N,function(o,a){N[a]=e.isString(o)?S.get(o):S.invoke(o,null,null,a)}),b.all({template:function(o){if(!o)return"Empty template";if(e.isString(o)&&F.plain)return o;if("boolean"==typeof F.cache&&!F.cache)return I(o,{cache:!1});return I(o,{cache:D})}(F.template||F.templateUrl),locals:b.all(N)}).then(function(o){var t=o.template,l=o.locals;F.showClose&&(t+='<button aria-label="Dismiss" class="ngdialog-close"></button>');var r=F.overlay?"":" ngdialog-no-overlay",s='<div class="ngdialog-content" role="document" style="cursor: move; resize: both;" ng-style="ngDialogStyle" ng-mousedown="ngDialogMouseDown($event)" ng-mousemove="ngDialogMouseMove($event)" ng-mouseup="ngDialogMouseUp($event)"><div class="ngdialog-content-wrapper" style="cursor: default;" ng-mousedown="$event.stopPropagation()">'+t+"</div></div>";if((O=a('<div id="'+i+'" class="ngdialog'+r+'"></div>')).html(F.overlay?'<div class="ngdialog-overlay" ng-mousemove="ngDialogMouseMove($event)"></div>'+s:s),O.data("$ngDialogOptions",F),y.ngDialogPosition={x:0,y:0},y.ngDialogStyle={"margin-left":"0px","margin-top":"0px"},y.ngDialogMouseDown=function(e){var o=e.currentTarget.clientWidth-e.offsetX,a=e.currentTarget.clientHeight-e.offsetY;(o>15||a>15)&&(y.ngDialogDrag={x:y.ngDialogPosition.x,y:y.ngDialogPosition.y,originX:e.pageX,originY:e.pageY})},y.ngDialogMouseMove=function(e){y.ngDialogDrag&&(y.ngDialogPosition.x=y.ngDialogDrag.x+e.pageX-y.ngDialogDrag.originX,y.ngDialogPosition.y=y.ngDialogDrag.y+e.pageY-y.ngDialogDrag.originY,y.ngDialogStyle["margin-left"]=y.ngDialogPosition.x+"px",y.ngDialogStyle["margin-top"]=y.ngDialogPosition.y+"px")},y.ngDialogMouseUp=function(e){y.ngDialogDrag=null},y.ngDialogId=i,F.data&&e.isString(F.data)){var g=F.data.replace(/^\s*/,"")[0];y.ngDialogData="{"===g||"["===g?e.fromJson(F.data):new String(F.data),y.ngDialogData.ngDialogId=i}else F.data&&e.isObject(F.data)&&(y.ngDialogData=F.data,y.ngDialogData.ngDialogId=i);if(F.className&&O.addClass(F.className),F.appendClassName&&O.addClass(F.appendClassName),F.width&&(P=O[0].querySelector(".ngdialog-content"),e.isString(F.width)?P.style.width=F.width:P.style.width=F.width+"px"),F.height&&(P=O[0].querySelector(".ngdialog-content"),e.isString(F.height)?P.style.height=F.height:P.style.height=F.height+"px"),F.disableAnimation&&O.addClass("ngdialog-disabled-animation"),k=F.appendTo&&e.isString(F.appendTo)?e.element(document.querySelector(F.appendTo)):E.body,B.applyAriaAttributes(O,F),[{name:"$ngDialogPreCloseCallback",value:F.preCloseCallback},{name:"$ngDialogOnOpenCallback",value:F.onOpenCallback}].forEach(function(o){var a;o.value&&(e.isFunction(o.value)?a=o.value:e.isString(o.value)&&y&&(e.isFunction(y[o.value])?a=y[o.value]:y.$parent&&e.isFunction(y.$parent[o.value])?a=y.$parent[o.value]:C&&e.isFunction(C[o.value])&&(a=C[o.value])),a&&O.data(o.name,a))}),y.closeThisDialog=function(e){B.closeDialog(O,e)},F.controller&&(e.isString(F.controller)||e.isArray(F.controller)||e.isFunction(F.controller))){var u;F.controllerAs&&e.isString(F.controllerAs)&&(u=F.controllerAs);var f=A(F.controller,e.extend(l,{$scope:y,$element:O}),!0,u);F.bindToController&&e.extend(f.instance,{ngDialogId:y.ngDialogId,ngDialogData:y.ngDialogData,closeThisDialog:y.closeThisDialog,confirm:y.confirm}),"function"==typeof f?O.data("$ngDialogControllerController",f()):O.data("$ngDialogControllerController",f)}($(function(){var o=document.querySelectorAll(".ngdialog");B.deactivateAll(o),v(O)(y);var a=w.innerWidth-E.body.prop("clientWidth");E.html.addClass(F.bodyClassName),E.body.addClass(F.bodyClassName),c.push(F.bodyClassName);var n=a-(w.innerWidth-E.body.prop("clientWidth"));n>0&&B.setBodyPadding(n),k.append(O),B.activate(O),F.trapFocus&&B.autoFocus(O),F.name?C.$broadcast("ngDialog.opened",{dialog:O,name:F.name}):C.$broadcast("ngDialog.opened",O);var t=O.data("$ngDialogOnOpenCallback");t&&e.isFunction(t)&&t.call(O),y.scrollY=window.scrollY,E.body.css("position","fixed"),E.body.css("top","-"+y.scrollY+"px")}),d||(E.body.bind("keydown",B.onDocumentKeydown),d=!0),F.closeByNavigation&&p.push(O),F.preserveFocus&&O.data("$ngDialogPreviousFocus",document.activeElement),n=function(e){var o=!!F.closeByDocument&&a(e.target).hasClass("ngdialog-overlay"),n=a(e.target).hasClass("ngdialog-close");(o||n)&&x.close(O.attr("id"),n?"$closeButton":"$document")},void 0!==w.Hammer)?(y.hammerTime=w.Hammer(O[0])).on("tap",n):O.bind("click",n);return m+=1,x}),{id:i,closePromise:r.promise,close:function(e){B.closeDialog(O,e)}}}function I(o,a){return(a=a||{}).headers=a.headers||{},e.extend(a.headers,{Accept:"text/html"}),C.$broadcast("ngDialog.templateLoading",o),h.get(o,a).then(function(e){return C.$broadcast("ngDialog.templateLoaded",o),e.data||""})}},openConfirm:function(n){0!==e.element(".ngdialog-content").length&&(e.element(".ngdialog-content")[0].style.zIndex=10001,e.element(".ngdialog-overlay")[0].style.zIndex=1e4);var t=b.defer(),l=e.copy(o);n=n||{},void 0!==l.data&&(void 0===n.data&&(n.data={}),n.data=e.merge(e.copy(l.data),n.data)),e.extend(l,n),l.scope=e.isObject(l.scope)?l.scope.$new():C.$new(),l.scope.confirm=function(e){t.resolve(e);var o=a(document.getElementById(i.id));B.performCloseDialog(o,e)};var i=x.open(l);if(i)return i.closePromise.then(function(e){return e?t.reject(e.value):t.reject()}),t.promise},isOpen:function(e){return a(document.getElementById(e)).length>0},close:function(e,o){var n=a(document.getElementById(e));if(n.length)B.closeDialog(n,o);else if("$escape"===e){var t=g[g.length-1];(n=a(document.getElementById(t))).data("$ngDialogOptions").closeByEscape&&B.closeDialog(n,"$escape")}else x.closeAll(o);return x},closeAll:function(e){for(var o=document.querySelectorAll(".ngdialog"),n=o.length-1;n>=0;n--){var t=o[n];B.closeDialog(a(t),e)}},getOpenDialogs:function(){return g},getDefaults:function(){return o}};e.forEach(["html","body"],function(e){if(E[e]=y.find(e),r[e]){var o=B.getRouterLocationEventName();C.$on(o,function(){E[e]=y.find(e)})}});var O=B.detectUIRouter();if("1.0.0+"===O){S.get("$transitions").onStart({},function(e){for(;p.length>0;){var o=p.pop();if(!1===B.closeDialog(o))return!1}})}else{var k="legacy"===O?"$stateChangeStart":"$locationChangeStart";C.$on(k,function(e){for(;p.length>0;){var o=p.pop();!1===B.closeDialog(o)&&e.preventDefault()}})}return x}]}),o.directive("ngDialog",["ngDialog",function(o){return{restrict:"A",scope:{ngDialogScope:"="},link:function(a,n,t){n.on("click",function(n){n.preventDefault();var l=e.isDefined(a.ngDialogScope)?a.ngDialogScope:"noScope";e.isDefined(t.ngDialogClosePrevious)&&o.close(t.ngDialogClosePrevious);var i=o.getDefaults();o.open({template:t.ngDialog,className:t.ngDialogClass||i.className,appendClassName:t.ngDialogAppendClass,controller:t.ngDialogController,controllerAs:t.ngDialogControllerAs,bindToController:t.ngDialogBindToController,disableAnimation:t.ngDialogDisableAnimation,scope:l,data:t.ngDialogData,showClose:"false"!==t.ngDialogShowClose&&("true"===t.ngDialogShowClose||i.showClose),closeByDocument:"false"!==t.ngDialogCloseByDocument&&("true"===t.ngDialogCloseByDocument||i.closeByDocument),closeByEscape:"false"!==t.ngDialogCloseByEscape&&("true"===t.ngDialogCloseByEscape||i.closeByEscape),overlay:"false"!==t.ngDialogOverlay&&("true"===t.ngDialogOverlay||i.overlay),preCloseCallback:t.ngDialogPreCloseCallback||i.preCloseCallback,onOpenCallback:t.ngDialogOnOpenCallback||i.onOpenCallback,bodyClassName:t.ngDialogBodyClass||i.bodyClassName})})}}}]),o});